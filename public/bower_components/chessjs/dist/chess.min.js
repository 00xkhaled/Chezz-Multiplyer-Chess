/*! Chess.js v0.1.0 | Copyright (c) 2015, Jeff Hlywa (jhlywa@gmail.com) | github.com/jhlywa/chess.js/blob/master/LICENSE */!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.Chess=a()}}(function(){var a,b,c;return function d(a,b,c){function e(g,h){if(!b[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=b[g]={exports:{}};a[g][0].call(k.exports,function(b){var c=a[g][1][b];return e(c?c:b)},k,k.exports,d,a,b,c)}return b[g].exports}for(var f="function"==typeof require&&require,g=0;g<c.length;g++)e(c[g]);return e}({1:[function(a,b,c){"use strict";function d(a){this.chess=a}d.prototype={WHITE:WHITE,BLACK:BLACK,PAWN:PAWN,KNIGHT:KNIGHT,BISHOP:BISHOP,ROOK:ROOK,QUEEN:QUEEN,KING:KING,SQUARES:["a8","b8","c8","d8","e8","f8","g8","h8","a7","b7","c7","d7","e7","f7","g7","h7","a6","b6","c6","d6","e6","f6","g6","h6","a5","b5","c5","d5","e5","f5","g5","h5","a4","b4","c4","d4","e4","f4","g4","h4","a3","b3","c3","d3","e3","f3","g3","h3","a2","b2","c2","d2","e2","f2","g2","h2","a1","b1","c1","d1","e1","f1","g1","h1"],FLAGS:FLAGS,load:function(a){this.chess.load(a)},reset:function(){return this.chess.reset()},moves:function(a){return this.chess.moves(a)},inCheck:function(){return this.chess.inCheck()},inCheckmate:function(){return this.chess.inCheckmate()},inStalemate:function(){return this.chess.inStalemate()},inDraw:function(){return this.chess.halfMoves>=100||this.chess.inStalemate()||this.chess.insufficientMaterial()||this.chess.inThreefoldRepetition()},insufficientMaterial:function(){return this.chess.insufficientMaterial()},inThreefoldRepetition:function(){return this.chess.inThreefoldRepetition()},gameOver:function(){return this.chess.halfMoves>=100||this.chess.inCheckmate()||this.chess.inStalemate()||this.chess.insufficientMaterial()||this.chess.inThreefoldRepetition()},validateFen:function(a){return this.chess.validateFen(a)},fen:function(){return this.chess.generateFen()},pgn:function(a){return this.chess.pgn(a)},moveFromSan:function(a){return this.chess.moveFromSan(a)},loadPgn:function(a,b){return this.chess.loadPgn(a,b)},header:function(a){return this.chess.setHeader(a)},ascii:function(){return this.chess.ascii()},turn:function(){return this.chess.turn},move:function(a){return this.chess.move(a)},undo:function(){var a=this.chess.undoMove();return a?this.chess.makePretty(a):null},clear:function(){return this.chess.clear()},put:function(a,b){return this.chess.put(a,b)},get:function(a){return this.chess.get(a)},remove:function(a){return this.chess.remove(a)},perft:function(a){return this.chess.perft(a)},squareColor:function(a){if(a in this.chess.SQUARES){var b=this.chess.SQUARES[a];return(this.chess.rank(b)+this.chess.file(b))%2===0?"light":"dark"}return null},history:function(a){var b=[],c=[],d="undefined"!=typeof a&&"verbose"in a&&a.verbose;while(this.chess.history.length>0)b.push(this.chess.undoMove());while(b.length>0){var e=b.pop();d?c.push(this.chess.makePretty(e)):c.push(this.chess.moveToSan(e)),this.chess.makeMove(e)}return c}},b.exports=d},{}],2:[function(a,b,c){"use strict";function d(a){this.board=new Array(128),this.kings={w:EMPTY,b:EMPTY},this.turn=WHITE,this.castling={w:0,b:0},this.epSquare=EMPTY,this.halfMoves=0,this.moveNumber=1,this.history=[],this.header={},"undefined"==typeof a?this.load(DEFAULT_POSITION):this.load(a)}d.prototype={clear:function(){this.board=new Array(128),this.kings={w:EMPTY,b:EMPTY},this.turn=WHITE,this.castling={w:0,b:0},this.epSquare=EMPTY,this.halfMoves=0,this.moveNumber=1,this.history=[],this.header={},this.updateSetup(this.generateFen())},reset:function(){this.load(DEFAULT_POSITION)},load:function(a){var b=a.split(/\s+/),c=b[0],d=0,e=SYMBOLS+"12345678/";if(!this.validateFen(a).valid)return!1;this.clear();for(var f=0;f<c.length;f++){var g=c.charAt(f);if("/"===g)d+=8;else if(this.isDigit(g))d+=parseInt(g,10);else{var h="a">g?WHITE:BLACK;this.put({type:g.toLowerCase(),color:h},this.algebraic(d)),d++}}return this.turn=b[1],b[2].indexOf("K")>-1&&(this.castling.w|=BITS.KSIDE_CASTLE),b[2].indexOf("Q")>-1&&(this.castling.w|=BITS.QSIDE_CASTLE),b[2].indexOf("k")>-1&&(this.castling.b|=BITS.KSIDE_CASTLE),b[2].indexOf("q")>-1&&(this.castling.b|=BITS.QSIDE_CASTLE),this.epSquare="-"===b[3]?EMPTY:SQUARES[b[3]],this.halfMoves=parseInt(b[4],10),this.moveNumber=parseInt(b[5],10),this.updateSetup(this.generateFen()),!0},validateFen:function(a){var b=a.split(/\s+/);if(6!==b.length)return{valid:!1,errorNumber:1,error:ERRORS[1]};if(isNaN(b[5])||parseInt(b[5],10)<=0)return{valid:!1,errorNumber:2,error:ERRORS[2]};if(isNaN(b[4])||parseInt(b[4],10)<0)return{valid:!1,errorNumber:3,error:ERRORS[3]};if(!/^(-|[abcdefgh][36])$/.test(b[3]))return{valid:!1,errorNumber:4,error:ERRORS[4]};if(!/^(KQ?k?q?|Qk?q?|kq?|q|-)$/.test(b[2]))return{valid:!1,errorNumber:5,error:ERRORS[5]};if(!/^(w|b)$/.test(b[1]))return{valid:!1,errorNumber:6,error:ERRORS[6]};var c=b[0].split("/");if(8!==c.length)return{valid:!1,errorNumber:7,error:ERRORS[7]};for(var d=0;d<c.length;d++){for(var e=0,f=!1,g=0;g<c[d].length;g++)if(isNaN(c[d][g])){if(!/^[prnbqkPRNBQK]$/.test(c[d][g]))return{valid:!1,errorNumber:9,error:ERRORS[9]};e+=1,f=!1}else{if(f)return{valid:!1,errorNumber:8,error:ERRORS[8]};e+=parseInt(c[d][g],10),f=!0}if(8!==e)return{valid:!1,errorNumber:10,error:ERRORS[10]}}return{valid:!0,errorNumber:0,error:ERRORS[0]}},generateFen:function(){for(var a=0,b="",c=SQUARES.a8;c<=SQUARES.h1;c++){if(null==this.board[c])a++;else{a>0&&(b+=a,a=0);var d=this.board[c].color,e=this.board[c].type;b+=d===WHITE?e.toUpperCase():e.toLowerCase()}c+1&136&&(a>0&&(b+=a),c!==SQUARES.h1&&(b+="/"),a=0,c+=8)}var f="";this.castling[WHITE]&BITS.KSIDE_CASTLE&&(f+="K"),this.castling[WHITE]&BITS.QSIDE_CASTLE&&(f+="Q"),this.castling[BLACK]&BITS.KSIDE_CASTLE&&(f+="k"),this.castling[BLACK]&BITS.QSIDE_CASTLE&&(f+="q"),f=f||"-";var g=this.epSquare===EMPTY?"-":this.algebraic(this.epSquare);return[b,this.turn,f,g,this.halfMoves,this.moveNumber].join(" ")},setHeader:function(a){for(var b=0;b<a.length;b+=2)"string"==typeof a[b]&&"string"==typeof a[b+1]&&(this.header[a[b]]=a[b+1]);return this.header},updateSetup:function(a){this.history.length>0||(a!==DEFAULT_POSITION?(this.header.SetUp="1",this.header.FEN=a):(delete this.header.SetUp,delete this.header.FEN))},get:function(a){var b=this.board[SQUARES[a]];return b?{type:b.type,color:b.color}:null},put:function(a,b){if(!("type"in a&&"color"in a))return!1;if(-1===SYMBOLS.indexOf(a.type.toLowerCase()))return!1;if(!(b in SQUARES))return!1;var c=SQUARES[b];return a.type===KING&&this.kings[a.color]!==EMPTY&&this.kings[a.color]!==c?!1:(this.board[c]={type:a.type,color:a.color},a.type===KING&&(this.kings[a.color]=c),this.updateSetup(this.generateFen()),!0)},remove:function(a){var b=this.get(a);return this.board[SQUARES[a]]=null,b&&b.type===KING&&(this.kings[b.color]=EMPTY),this.updateSetup(this.generateFen()),b},buildMove:function(a,b,c,d){var e={color:this.turn,from:a,to:b,flags:c,piece:this.board[a].type};return d&&(e.flags|=BITS.PROMOTION,e.promotion=d),this.board[b]?e.captured=this.board[b].type:c&BITS.EP_CAPTURE&&(e.captured=PAWN),e},addMove:function(a,b,c,d){if(this.board[b].type!==PAWN||this.rank(c)!==RANK_8&&this.rank(c)!==RANK_1)a.push(this.buildMove(b,c,d));else for(var e=[QUEEN,ROOK,BISHOP,KNIGHT],f=0,g=e.length;g>f;f++)a.push(this.buildMove(b,c,d,e[f]))},generateMoves:function(a){var b=[],c=this.turn,d=this.swapColor(c),e={b:RANK_7,w:RANK_2},f=SQUARES.a8,g=SQUARES.h1,h=!1,i="undefined"!=typeof a&&"legal"in a?a.legal:!0;if("undefined"!=typeof a&&"square"in a){if(!(a.square in SQUARES))return[];f=g=SQUARES[a.square],h=!0}for(var j=f;g>=j;j++)if(136&j)j+=7;else{var k=this.board[j];if(null!=k&&k.color===c)if(k.type===PAWN){var l=j+PAWN_OFFSETS[c][0];if(null==this.board[l]){this.addMove(b,j,l,BITS.NORMAL);var l=j+PAWN_OFFSETS[c][1];e[c]===this.rank(j)&&null==this.board[l]&&this.addMove(b,j,l,BITS.BIG_PAWN)}for(m=2;4>m;m++){var l=j+PAWN_OFFSETS[c][m];136&l||(null!=this.board[l]&&this.board[l].color===d?this.addMove(b,j,l,BITS.CAPTURE):l===this.epSquare&&this.addMove(b,j,l,BITS.EP_CAPTURE))}}else for(var m=0,n=PIECE_OFFSETS[k.type].length;n>m;m++){var o=PIECE_OFFSETS[k.type][m],l=j;while(!0){if(l+=o,136&l)break;if(null!=this.board[l]){if(this.board[l].color===c)break;this.addMove(b,j,l,BITS.CAPTURE);break}if(this.addMove(b,j,l,BITS.NORMAL),k.type===KNIGHT||k.type===KING)break}}}if(!h||g===this.kings[c]){if(this.castling[c]&BITS.KSIDE_CASTLE){var p=this.kings[c],q=p+2;null!=this.board[p+1]||null!=this.board[q]||this.attacked(d,this.kings[c])||this.attacked(d,p+1)||this.attacked(d,q)||this.addMove(b,this.kings[c],q,BITS.KSIDE_CASTLE)}if(this.castling[c]&BITS.QSIDE_CASTLE){var p=this.kings[c],q=p-2;null!=this.board[p-1]||null!=this.board[p-2]||null!=this.board[p-3]||this.attacked(d,this.kings[c])||this.attacked(d,p-1)||this.attacked(d,q)||this.addMove(b,this.kings[c],q,BITS.QSIDE_CASTLE)}}if(!i)return b;for(var r=[],j=0,n=b.length;n>j;j++)this.makeMove(b[j]),this.kingAttacked(c)||r.push(b[j]),this.undoMove();return r},moveToSan:function(a){var b="";if(a.flags&BITS.KSIDE_CASTLE)b="O-O";else if(a.flags&BITS.QSIDE_CASTLE)b="O-O-O";else{var c=this.getDisambiguator(a);a.piece!==PAWN&&(b+=a.piece.toUpperCase()+c),a.flags&(BITS.CAPTURE|BITS.EP_CAPTURE)&&(a.piece===PAWN&&(b+=this.algebraic(a.from)[0]),b+="x"),b+=this.algebraic(a.to),a.flags&BITS.PROMOTION&&(b+="="+a.promotion.toUpperCase())}return this.makeMove(a),this.inCheck()&&(b+=this.inCheckmate()?"#":"+"),this.undoMove(),b},moveFromSan:function(a){for(var b=a.replace(/[+#?!=]/,""),c=this.generateMoves(),d=0,e=c.length;e>d;d++)if(b===this.moveToSan(c[d]).replace(/[+#?!=]/,""))return c[d];return null},attacked:function(a,b){for(var c=SQUARES.a8;c<=SQUARES.h1;c++)if(136&c)c+=7;else if(null!=this.board[c]&&this.board[c].color===a){var d=this.board[c],e=c-b,f=e+119;if(ATTACKS[f]&1<<SHIFTS[d.type]){if(d.type===PAWN){if(e>0){if(d.color===WHITE)return!0}else if(d.color===BLACK)return!0;continue}if(d.type===KNIGHT||d.type===KING)return!0;var g=RAYS[f],h=c+g,i=!1;while(h!==b){if(null!=this.board[h]){i=!0;break}h+=g}if(!i)return!0}}return!1},kingAttacked:function(a){return this.attacked(this.swapColor(a),this.kings[a])},inCheck:function(){return this.kingAttacked(this.turn)},inCheckmate:function(){return this.inCheck()&&0===this.generateMoves().length},inStalemate:function(){return!this.inCheck()&&0===this.generateMoves().length},insufficientMaterial:function(){for(var a={},b=[],c=0,d=0,e=SQUARES.a8;e<=SQUARES.h1;e++)if(d=(d+1)%2,136&e)e+=7;else{var f=this.board[e];f&&(a[f.type]=f.type in a?a[f.type]+1:1,f.type===BISHOP&&b.push(d),c++)}if(2===c)return!0;if(3===c&&(1===a[BISHOP]||1===a[KNIGHT]))return!0;if(c===a[BISHOP]+2){for(var g=0,h=b.length,e=0;h>e;e++)g+=b[e];if(0===g||g===h)return!0}return!1},inThreefoldRepetition:function(){var a=[],b={},c=!1;while(!0){var d=this.undoMove();if(!d)break;a.push(d)}while(!0){var e=this.generateFen().split(" ").slice(0,4).join(" ");if(b[e]=e in b?b[e]+1:1,b[e]>=3&&(c=!0),!a.length)break;this.makeMove(a.pop())}return c},push:function(a){this.history.push({move:a,kings:{b:this.kings.b,w:this.kings.w},turn:this.turn,castling:{b:this.castling.b,w:this.castling.w},epSquare:this.epSquare,halfMoves:this.halfMoves,moveNumber:this.moveNumber})},makeMove:function(a){var b=this.turn,c=this.swapColor(b);if(this.push(a),this.board[a.to]=this.board[a.from],this.board[a.from]=null,a.flags&BITS.EP_CAPTURE&&(this.turn===BLACK?this.board[a.to-16]=null:this.board[a.to+16]=null),a.flags&BITS.PROMOTION&&(this.board[a.to]={type:a.promotion,color:b}),this.board[a.to].type===KING){if(this.kings[this.board[a.to].color]=a.to,a.flags&BITS.KSIDE_CASTLE){var d=a.to-1,e=a.to+1;this.board[d]=this.board[e],this.board[e]=null}else if(a.flags&BITS.QSIDE_CASTLE){var d=a.to+1,e=a.to-2;this.board[d]=this.board[e],this.board[e]=null}this.castling[b]=""}if(this.castling[b])for(var f=0,g=ROOKS[b].length;g>f;f++)if(a.from===ROOKS[b][f].square&&this.castling[b]&ROOKS[b][f].flag){this.castling[b]^=ROOKS[b][f].flag;break}if(this.castling[c])for(var f=0,g=ROOKS[c].length;g>f;f++)if(a.to===ROOKS[c][f].square&&this.castling[c]&ROOKS[c][f].flag){this.castling[c]^=ROOKS[c][f].flag;break}a.flags&BITS.BIG_PAWN?this.turn===BLACK?this.epSquare=a.to-16:this.epSquare=a.to+16:this.epSquare=EMPTY,a.piece===PAWN?this.halfMoves=0:a.flags&(BITS.CAPTURE|BITS.EP_CAPTURE)?this.halfMoves=0:this.halfMoves++,this.turn===BLACK&&this.moveNumber++,this.turn=this.swapColor(this.turn)},undoMove:function(){var a=this.history.pop();if(null==a)return null;var b=a.move;this.kings=a.kings,this.turn=a.turn,this.castling=a.castling,this.epSquare=a.epSquare,this.halfMoves=a.halfMoves,this.moveNumber=a.moveNumber;var c=this.turn,d=this.swapColor(this.turn);if(this.board[b.from]=this.board[b.to],this.board[b.from].type=b.piece,this.board[b.to]=null,b.flags&BITS.CAPTURE)this.board[b.to]={type:b.captured,color:d};else if(b.flags&BITS.EP_CAPTURE){var e;e=c===BLACK?b.to-16:b.to+16,this.board[e]={type:PAWN,color:d}}if(b.flags&(BITS.KSIDE_CASTLE|BITS.QSIDE_CASTLE)){var f,g;b.flags&BITS.KSIDE_CASTLE?(f=b.to+1,g=b.to-1):b.flags&BITS.QSIDE_CASTLE&&(f=b.to-2,g=b.to+1),this.board[f]=this.board[g],this.board[g]=null}return b},getDisambiguator:function(a){for(var b=this.generateMoves(),c=a.from,d=a.to,e=a.piece,f=0,g=0,h=0,i=0,j=b.length;j>i;i++){var k=b[i].from,l=b[i].to,m=b[i].piece;e===m&&c!==k&&d===l&&(f++,this.rank(c)===this.rank(k)&&g++,this.file(c)===this.file(k)&&h++)}return f>0?g>0&&h>0?this.algebraic(c):h>0?this.algebraic(c).charAt(1):this.algebraic(c).charAt(0):""},ascii:function(){for(var a="   +------------------------+\n",b=SQUARES.a8;b<=SQUARES.h1;b++){if(0===this.file(b)&&(a+=" "+"87654321"[this.rank(b)]+" |"),null==this.board[b])a+=" . ";else{var c=this.board[b].type,d=this.board[b].color,e=d===WHITE?c.toUpperCase():c.toLowerCase();a+=" "+e+" "}b+1&136&&(a+="|\n",b+=8)}return a+="   +------------------------+\n",a+="     a  b  c  d  e  f  g  h\n"},rank:function(a){return a>>4},file:function(a){return 15&a},algebraic:function(a){var b=this.file(a),c=this.rank(a);return"abcdefgh".substring(b,b+1)+"87654321".substring(c,c+1)},swapColor:function(a){return a===WHITE?BLACK:WHITE},isDigit:function(a){return-1!=="0123456789".indexOf(a)},makePretty:function(a){var b=this.clone(a);b.san=this.moveToSan(b),b.to=this.algebraic(b.to),b.from=this.algebraic(b.from);var c="";for(var d in BITS)BITS[d]&b.flags&&(c+=FLAGS[d]);return b.flags=c,b},moves:function(a){for(var b=this.generateMoves(a),c=[],d=0,e=b.length;e>d;d++)"undefined"!=typeof a&&"verbose"in a&&a.verbose?c.push(this.makePretty(b[d])):c.push(this.moveToSan(b[d]));return c},pgn:function(a){var b="object"==typeof a&&"string"==typeof a.newlineChar?a.newlineChar:"\n",c="object"==typeof a&&"number"==typeof a.maxWidth?a.maxWidth:0,d=[],e=!1;for(var f in this.header)d.push("["+f+' "'+this.header[f]+'"]'+b),e=!0;e&&this.history.length&&d.push(b);var g=[];while(this.history.length>0)g.push(this.undoMove());var h=[],i="",j=1;while(g.length>0){var k=g.pop();1===j&&"b"===k.color?(i="1. ...",j++):"w"===k.color&&(i.length&&h.push(i),i=j+".",j++),i=i+" "+this.moveToSan(k),this.makeMove(k)}if(i.length&&h.push(i),"undefined"!=typeof this.header.Result&&h.push(this.header.Result),0===c)return d.join("")+h.join(" ");for(var l=0,f=0;f<h.length;f++)l+h[f].length>c&&0!==f?(" "===d[d.length-1]&&d.pop(),d.push(b),l=0):0!==f&&(d.push(" "),l++),d.push(h[f]),l+=h[f].length;return d.join("")},move:function(a){var b=null,c=this.generateMoves();if("string"==typeof a){for(var d=a.replace(/[+#?!=]/,""),e=0,f=c.length;f>e;e++)if(d===this.moveToSan(c[e]).replace(/[+#?!=]/,"")){b=c[e];break}}else if("object"==typeof a)for(var e=0,f=c.length;f>e;e++)if(!(a.from!==this.algebraic(c[e].from)||a.to!==this.algebraic(c[e].to)||"promotion"in c[e]&&a.promotion!==c[e].promotion)){b=c[e];break}if(!b)return null;var g=this.makePretty(b);return this.makeMove(b),g},mask:function(a){return a.replace(/\\/g,"\\")},getMoveObj:function(a){return this.moveFromSan(this.trim(a))},hasKeys:function(a){var b=!1;for(var c in a)b=!0;return b},newlineChar:function(a){return"object"==typeof a&&"string"==typeof a.newlineChar?a.newlineChar:"\r?\n"},parsePgnHeader:function(a,b){for(var c=this.newlineChar(b),d={},e=a.split(new RegExp(this.mask(c))),f="",g="",h=0;h<e.length;h++)f=e[h].replace(/^\[([A-Z][A-Za-z]*)\s.*\]$/,"$1"),g=e[h].replace(/^\[[A-Za-z]+\s"(.*)"\]$/,"$1"),this.trim(f).length>0&&(d[f]=g);return d},loadPgn:function(a,b){var c=this.newlineChar(b),d=new RegExp("^(\\[(.|"+this.mask(c)+")*\\])("+this.mask(c)+")*1.("+this.mask(c)+"|.)*$","g"),e=a.replace(d,"$1");"["!==e[0]&&(e=""),this.reset();var f=this.parsePgnHeader(e,b);for(var g in f)this.setHeader([g,f[g]]);var h=a.replace(e,"").replace(new RegExp(this.mask(c),"g")," ");h=h.replace(/(\{[^}]+\})+?/g,""),h=h.replace(/\d+\./g,"");var i=this.trim(h).split(new RegExp(/\s+/));i=i.join(",").replace(/,,+/g,",").split(",");for(var j="",k=0;k<i.length-1;k++){if(j=this.getMoveObj(i[k]),null==j)return!1;this.makeMove(j)}if(j=i[i.length-1],POSSIBLE_RESULTS.indexOf(j)>-1)this.hasKeys(this.header)&&"undefined"==typeof this.header.Result&&this.setHeader(["Result",j]);else{if(j=this.getMoveObj(j),null==j)return!1;this.makeMove(j)}return!0},clone:function(a){var b=a instanceof Array?[]:{};for(var c in a)"object"==typeof c?b[c]=this.clone(a[c]):b[c]=a[c];return b},perft:function(a){for(var b=this.generateMoves({legal:!1}),c=0,d=this.turn,e=0,f=b.length;f>e;e++){if(this.makeMove(b[e]),!this.kingAttacked(d))if(a-1>0){var g=this.perft(a-1);c+=g}else c++;this.undoMove()}return c},trim:function(a){return a.replace(/^\s+|\s+$/g,"")}},b.exports=d},{}],3:[function(a,b,c){(function(a){"use strict";a.BLACK="b",a.WHITE="w",a.EMPTY=-1,a.PAWN="p",a.KNIGHT="n",a.BISHOP="b",a.ROOK="r",a.QUEEN="q",a.KING="k",a.SYMBOLS="pnbrqkPNBRQK",a.DEFAULT_POSITION="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",a.POSSIBLE_RESULTS=["1-0","0-1","1/2-1/2","*"],a.PAWN_OFFSETS={b:[16,32,17,15],w:[-16,-32,-17,-15]},a.PIECE_OFFSETS={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},a.ATTACKS=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],a.RAYS=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],a.SHIFTS={p:0,n:1,b:2,r:3,q:4,k:5},a.FLAGS={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},a.BITS={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},a.RANK_1=7,a.RANK_2=6,a.RANK_3=5,a.RANK_4=4,a.RANK_5=3,a.RANK_6=2,a.RANK_7=1,a.RANK_8=0,a.SQUARES={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},a.ROOKS={w:[{square:SQUARES.a1,flag:BITS.QSIDE_CASTLE},{square:SQUARES.h1,flag:BITS.KSIDE_CASTLE}],b:[{square:SQUARES.a8,flag:BITS.QSIDE_CASTLE},{square:SQUARES.h8,flag:BITS.KSIDE_CASTLE}]},a.ERRORS={0:"No errors.",1:"FEN string must contain six space-delimited fields.",2:"6th field (move number) must be a positive integer.",3:"5th field (half move counter) must be a non-negative integer.",4:"4th field (en-passant square) is invalid.",5:"3rd field (castling availability) is invalid.",6:"2nd field (side to move) is invalid.",7:"1st field (piece positions) does not contain 8 '/'-delimited rows.",8:"1st field (piece positions) is invalid [consecutive numbers].",9:"1st field (piece positions) is invalid [invalid piece].",10:"1st field (piece positions) is invalid [row too large]."}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(a,b,c){"use strict";a("./globals");var d=a("./chess"),e=a("./api");b.exports=function(a){return new e(new d(a))}},{"./api":1,"./chess":2,"./globals":3}]},{},[4])(4)});